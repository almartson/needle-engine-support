import{_ as o,M as p,p as i,q as r,R as n,t as s,N as e,a1 as t}from"./framework-1a844b00.js";const l={},c=t('<h1 id="technical-overview" tabindex="-1"><a class="header-anchor" href="#technical-overview" aria-hidden="true">#</a> Technical Overview</h1><h2 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works" aria-hidden="true">#</a> How it works</h2><p>Needle Engine roughly consists of three parts:</p><ul><li>a number of <strong>components and tools</strong> that allow you to set up scenes for Needle Engine from e.g. the Unity Editor.</li><li>an <strong>exporter</strong> that turns scene and component data into glTF.</li><li>a <strong>web runtime</strong> that loads and runs the produced glTF files and their extensions.</li></ul><p>The editor extensions currently support the Unity Editor, with some promising experiments for Blender on the horizon (but no ETA).<br> The web runtime uses three.js for rendering, adds a component system on top of the three scene graph and hooks up extension loaders for our custom glTF extensions.</p><p>Effectively, this turns the Unity Editor into a full member of a regular web development toolchain – &quot;just&quot; one more piece that gets added to the regular HTML, JavaScript, CSS and bundling workflow.</p><h2 id="gltf-assets" tabindex="-1"><a class="header-anchor" href="#gltf-assets" aria-hidden="true">#</a> glTF Assets</h2>',7),u={href:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),k=n("a",{href:"#vendor-specific-gltf-extensions-needle_"},"vendor extensions",-1),m=t(`<h3 id="supported-gltf-extensions" tabindex="-1"><a class="header-anchor" href="#supported-gltf-extensions" aria-hidden="true">#</a> Supported glTF extensions</h3><p>A typical production glTF created by Needle Engine uses the following extensions:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>KHR_lights_punctual
KHR_materials_unlit
KHR_texture_transform
KHR_animation_pointer
NEEDLE_techniques_webgl
NEEDLE_gameobject_data
NEEDLE_components
NEEDLE_persistent_assets
NEEDLE_lightmaps
NEEDLE_lighting_settings
KHR_texture_basisu
KHR_draco_mesh_compression
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Other supported extensions:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>EXT_meshopt_compression
EXT_mesh_gpu_instancing (import and export)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Supported material extensions:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>KHR_materials_clearcoat
KHR_materials_ior
KHR_materials_specular
KHR_materials_transmission
KHR_materials_iridescence
KHR_materials_unlit
KHR_materials_volume
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),v={href:"https://threejs.org/docs/#examples/en/loaders/GLTFLoader",target:"_blank",rel:"noopener noreferrer"},b=t("<blockquote><p><strong>Note</strong>: Materials using these extensions can be exported from Unity via UnityGLTF&#39;s <code>PBRGraph</code> material.</p></blockquote><blockquote><p><strong>Note</strong>: Audio and variants are already supported in Needle Engine through <code>NEEDLE_components</code> and <code>NEEDLE_persistent_assets</code>, but there are some options for more alignment to existing proposals such as <code>KHR_audio</code> and <code>KHR_materials_variants</code>.</p></blockquote>",2),q={href:"https://threejs.org/docs/#examples/en/loaders/GLTFLoader",target:"_blank",rel:"noopener noreferrer"},h=n("h3",{id:"compression",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#compression","aria-hidden":"true"},"#"),s(" Compression")],-1),g={href:"https://gltf-transform.donmccurdy.com/",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"glTF-transform",-1),f=n("code",null,"etc1s",-1),_=n("code",null,"uastc",-1),x=n("code",null,"draco",-1),E=t('<blockquote><p><strong>Note</strong>: We might switch to meshopt compression in the future, but there&#39;s a number of open issues in three.js related to raycasts and bounds for meshopt-compressed assets.</p></blockquote><h2 id="vendor-specific-gltf-extensions-needle" tabindex="-1"><a class="header-anchor" href="#vendor-specific-gltf-extensions-needle" aria-hidden="true">#</a> Vendor-specific glTF Extensions (NEEDLE_*)</h2><p>Needle Engine stores custom data in glTF files through our vendor extensions. These extensions are designed to be flexible and allow relatively arbitrary data to put into them. Notably, no code is stored in these files. Interactive components is restored from the data at runtime. This has some similarities to how AssetBundles function in Unity – the receiving side of an asset needs to have matching code for components stored in the file.</p><blockquote><p>We&#39;re currently not prodiving schemas for these extensions as they are still in development. The JSON snippets below demonstrates extension usage by example and includes notes on architectural choices and what we may change in future releases.</p></blockquote><blockquote><p>References between pieces of data are currently constructed through a mix of indices into other parts of the glTF file and JSON pointers. We may consolidate these approaches in a future release. We&#39;re also storing string-based GUIDs for cases where ordering is otherwise hard to resolve (e.g. two components referencing each other) that we may remove in the future.</p></blockquote><h3 id="needle-components" tabindex="-1"><a class="header-anchor" href="#needle-components" aria-hidden="true">#</a> NEEDLE_components</h3><p>This extension contains per-node component data. The component names map to type names on both the JavaScript and C# side.<br> Multiple components with the same name can be added to the same node.</p>',7),w=n("code",null,"NEEDLE_components",-1),T={href:"https://github.com/ux3d/glTF/tree/extensions/KHR_animation_pointer/extensions/2.0/Khronos/KHR_animation_pointer",target:"_blank",rel:"noopener noreferrer"},N=n("code",null,"KHR_animation_pointer",-1),L=t(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;NEEDLE_components&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;builtin_components&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WebARSessionRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1516450550&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;arScale&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      <span class="token property">&quot;invertForward&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gameObject&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SyncedRoom&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1516450552&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;roomName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;network-room&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;urlParameterName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;room&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;joinRandomRoom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;requireRoomParameter&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;autoRejoin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gameObject&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PlayableDirector&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2243275882009986562_1668529989451832962&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;extrapolationMode&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;playableAsset&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extensions/NEEDLE_persistent_assets/4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;playableGraph&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;playOnAwake&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;timeUpdateMode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;initialTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">135.383333333332</span><span class="token punctuation">,</span>
      <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gameObject&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: Storing only the component type name means that type names currently need to be unique per project. We&#39;re planning to include package names in a future release to loosen this constraint to unique component type names per package instead of globally.</p></blockquote><blockquote><p><strong>Note</strong>: Currently there&#39;s no versioning information in the extension (which npm packaage does a component belong to, which version of that package was it exported against). We&#39;re planning to include versioning information in a future release.</p></blockquote><blockquote><p><strong>Note</strong>: Currently all components are in the <code>builtin_components</code> array. We might rename this to just <code>components</code> in a future release.</p></blockquote><h3 id="needle-gameobject-data" tabindex="-1"><a class="header-anchor" href="#needle-gameobject-data" aria-hidden="true">#</a> NEEDLE_gameobject_data</h3>`,5),j={href:"https://threejs.org/docs/#api/en/core/Layers",target:"_blank",rel:"noopener noreferrer"},R={href:"https://docs.unity3d.com/Manual/Layers.html",target:"_blank",rel:"noopener noreferrer"},D=t(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;NEEDLE_gameobject_data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;layers&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Untagged&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;hideFlags&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;static&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;activeSelf&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1516450549&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: We may need to better explain why this is not another entry in <a href="#needle_components"><code>NEEDLE_components</code></a>.</p></blockquote><h3 id="needle-lighting-settings" tabindex="-1"><a class="header-anchor" href="#needle-lighting-settings" aria-hidden="true">#</a> NEEDLE_lighting_settings</h3><p>This is a root extension defining ambient lighting properties per glTF file.</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;NEEDLE_lighting_settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;ambientMode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ambientLight&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token number">0.212</span><span class="token punctuation">,</span>
    <span class="token number">0.227</span><span class="token punctuation">,</span>
    <span class="token number">0.259</span><span class="token punctuation">,</span>
    <span class="token number">1</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ambientIntensity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;defaultReflectionMode&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: This extension might have to be defined per-scene instead of per-file.</p></blockquote><h3 id="needle-lightmaps" tabindex="-1"><a class="header-anchor" href="#needle-lightmaps" aria-hidden="true">#</a> NEEDLE_lightmaps</h3><p>This is a root extension defining a set of lightmaps for the glTF file.</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;NEEDLE_lightmaps&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;textures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;pointer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;textures/20&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: At the moment this extension also contains environment texture references. We&#39;re planning to change that in a future release.</p></blockquote><table><thead><tr><th>Texture Type</th><th>Value</th></tr></thead><tbody><tr><td>Lightmap</td><td>0</td></tr><tr><td>Environment Map</td><td>1</td></tr><tr><td>Reflection Map</td><td>2</td></tr></tbody></table><p>How lightmaps are applied is defined in the <code>MeshRenderer</code> component inside the <a href="#needle_components"><code>NEEDLE_components</code></a> extension per node:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;NEEDLE_components&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;builtin_components&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MeshRenderer&quot;</span><span class="token punctuation">,</span>
      ...
      <span class="token property">&quot;lightmapIndex&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lightmapScaleOffset&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">1.00579774</span><span class="token punctuation">,</span>
        <span class="token property">&quot;y&quot;</span><span class="token operator">:</span> <span class="token number">1.00579774</span><span class="token punctuation">,</span>
        <span class="token property">&quot;z&quot;</span><span class="token operator">:</span> <span class="token number">-0.00392889744</span><span class="token punctuation">,</span>
        <span class="token property">&quot;w&quot;</span><span class="token operator">:</span> <span class="token number">-0.00392889744</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: We may change that in a future release and move lightmap-related data to a <code>NEEDLE_lightmap</code> extension entry per node.</p></blockquote><h3 id="needle-persistent-assets" tabindex="-1"><a class="header-anchor" href="#needle-persistent-assets" aria-hidden="true">#</a> NEEDLE_persistent_assets</h3><p>Components in <code>NEEDLE_components</code> can reference data via JSON Pointers. The data in <code>NEEDLE_persistent_assets</code> is often referenced multiple times by different components and is thus stored separately in a root extension. By design, they are always referenced by something else (or have references within each other), and thus do not store type information at all: they&#39;re simply pieces of JSON data and components referencing them currently need to know what they expect.</p><p>Examples for assets/data stored in here are:</p><ul><li>AnimatorControllers, their layers and states</li><li>PlayableAssets (timelines), their tracks and embedded clips</li><li>SignalAssets</li><li>...</li></ul><p>Data in <code>persistent_assets</code> can reference other <code>persistent_assets</code> via JSON Pointer, but by design can&#39;t reference <code>NEEDLE_components</code>. This is similar to the separation beween &quot;Scene data&quot; and &quot;AssetDatabase content&quot; in Unity.</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LampionController&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9100000_ecab75bc7ab51a747a4c5c14236a43cd&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;layers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Base Layer&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;stateMachine&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Base Layer&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;defaultState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;states&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LampionFlying&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token number">677739540</span><span class="token punctuation">,</span>
            <span class="token property">&quot;motion&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LampionFlying&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;isLooping&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7400000_c296c4d76e956b34f8b5833ba90653c1&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;clips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodes/4&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;clip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animations/0&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodes/9&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;clip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animations/6&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodes/14&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;clip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animations/12&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;transitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">&quot;isExit&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;exitTime&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;hasFixedDuration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;hasExitTime&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token property">&quot;destinationState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;entryTransitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TrongCom Website&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;guid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11400000_93a8f856fe26af8498d94efe4835af36&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tracks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Markers&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MarkerTrack&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;muted&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token null keyword">null</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;clips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;markers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;trackOffset&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Animation Track&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AnimationTrack&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;muted&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;5017454109690854928_1668529989451832962&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;clips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">0.9833333333333333</span><span class="token punctuation">,</span>
          <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">0.9833333333333333</span><span class="token punctuation">,</span>
          <span class="token property">&quot;timeScale&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;asset&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;clip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animations/78&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;y&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;z&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;rotation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;y&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;z&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;w&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;removeStartOffset&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;clipIn&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;easeInDuration&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;easeOutDuration&quot;</span><span class="token operator">:</span> <span class="token number">0.41666666666666663</span><span class="token punctuation">,</span>
          <span class="token property">&quot;preExtrapolationMode&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;postExtrapolationMode&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ... 
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: We might include more type and versioning information in the future.</p></blockquote><h3 id="needle-techniques-webgl" tabindex="-1"><a class="header-anchor" href="#needle-techniques-webgl" aria-hidden="true">#</a> NEEDLE_techniques_webgl</h3>`,22),S={href:"https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_techniques_webgl",target:"_blank",rel:"noopener noreferrer"},F=n("code",null,"KHR_techniques_webgl",-1),M=t(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;KHR_techniques_webgl&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;programs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;vertexShader&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;fragmentShader&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shaders&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Pass-FRAGMENT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">35632</span><span class="token punctuation">,</span>
      <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;embedded WebGL fragment shader code ...&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Pass-VERTEX&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">35633</span><span class="token punctuation">,</span>
      <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;embedded WebGL vertex shader code ...&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;techniques&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;uniforms&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;_TimeParameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_TimeParameters&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">35666</span><span class="token punctuation">,</span>
          <span class="token property">&quot;semantic&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
          <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hlslcc_mtx4x4unity_MatrixVP&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hlslcc_mtx4x4unity_MatrixVP&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">35666</span><span class="token punctuation">,</span>
          <span class="token property">&quot;semantic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_VIEWPROJECTION&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
          <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;defines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>     
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong>: Currently, vertex and fragment shaders are always embedded as URI; we plan on moving that data into more reasonable bufferViews in the future.</p></blockquote><blockquote><p><strong>Note</strong>: There&#39;s some redundant properties in here that we plan on cleaning up.</p></blockquote><h2 id="typescript-and-data-mapping" tabindex="-1"><a class="header-anchor" href="#typescript-and-data-mapping" aria-hidden="true">#</a> TypeScript and Data Mapping</h2><blockquote><p>🏗️ Under Construction</p></blockquote><h2 id="rendering-with-three.js" tabindex="-1"><a class="header-anchor" href="#rendering-with-three.js" aria-hidden="true">#</a> Rendering with three.js</h2><blockquote><p>🏗️ Under Construction</p></blockquote><h2 id="why-aren-t-you-compiling-to-webassembly" tabindex="-1"><a class="header-anchor" href="#why-aren-t-you-compiling-to-webassembly" aria-hidden="true">#</a> Why aren&#39;t you compiling to WebAssembly?</h2><p>While Unity&#39;s compilation process from C# to IL to C++ (via IL2CPP) to WASM (via emscripten) is ingenious, it&#39;s also relatively slow. Building even a simple project to WASM takes many minutes, and that process is pretty much repeated on every code change. Some of it can be avoided through clever caching and ensuring that dev builds don&#39;t try to strip as much code, but it still stays slow.</p><blockquote><p>We do have a prototype for some WASM translation, but it&#39;s far from complete and the iteration speed stays slow, so we are not actively investigating this path right now.</p></blockquote><p>When looking into modern web workflows, we found that code reload times during development are neglectible, usually in sub-second ranges. This of course trades some performance (interpretation of JavaScript on the fly instead of compiler optimization at build time) for flexibility, but browsers got really good at getting the most out of JavaScript.</p><p>We believe that for iteration and tight testing workflows, it&#39;s beneficial to be able to test on device and on the target platform (the browser, in this case) as quickly and as often as possible - which is why we&#39;re skipping Unity&#39;s entire play mode, effectively always running in the browser.</p><blockquote><p><strong>Note</strong>: A really nice side effect is avoiding the entire slow &quot;domain reload&quot; step that usually costs 15-60 seconds each time you enter Play Mode. You&#39;re just &quot;live&quot; in the browser the moment you press Play.</p></blockquote>`,13);function W(H,K){const a=p("ExternalLinkIcon");return i(),r("div",null,[c,n("p",null,[s("Models, textures, animations, lights, cameras and more are stored as "),n("a",u,[s("glTF 2.0 files"),e(a)]),s(" in Needle Engine."),d,s(" Custom data is stored in "),k,s(". These cover everything from interactive components to physics, sequencing and lightmaps.")]),m,n("p",null,[s("More extensions and custom extensions can be added using the export callbacks of UnityGLTF (not documented yet) and the "),n("a",v,[s("glTF import extensions"),e(a)]),s(" of three.js.")]),b,n("p",null,[n("a",q,[s("Learn more about GLTF loading in three.js"),e(a)])]),h,n("p",null,[s("For production, we compress glTF assets with "),n("a",g,[y,e(a)]),s(". Textures use either "),f,s(", "),_,s(" or no compression, depending on texture type. Meshes use "),x,s(". Custom extensions are passed through in an opaque way.")]),E,n("p",null,[s("Data in "),w,s(" can be animated via the currently not ratified "),n("a",T,[N,e(a)]),s(" extension.")]),L,n("p",null,[s("This extension contains additional per-node data related to state, layers, and tags. Layers are used for both rendering and physics, similar to how "),n("a",j,[s("three.js"),e(a)]),s(" and "),n("a",R,[s("Unity"),e(a)]),s(" treat them.")]),D,n("p",null,[s("This extension builds upon the archived "),n("a",S,[F,e(a)]),s(" extension and extends it in a few crucial places. While the original extension was specified against WebGL 1.0, we're using it with WebGL 2.0 here and have added a number of uniform types.")]),M])}const C=o(l,[["render",W],["__file","technical-overview.html.vue"]]);export{C as default};
